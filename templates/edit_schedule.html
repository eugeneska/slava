{% extends "base.html" %}

{% block title %}Редактировать расписание - CleanPro{% endblock %}

{% block content %}
<h1>✏️ Редактировать расписание</h1>

<form method="POST" action="{{ url_for('edit_schedule', id=schedule.ID) }}">
    <div class="form-group">
        <label for="object_id">Объект *</label>
        <select id="object_id" name="object_id" required>
            {% for obj in objects %}
            <option value="{{ obj.ID }}" {% if obj.ID == schedule.ObjectID %}selected{% endif %}>
                {{ obj.ObjectName }} ({{ obj.ClientName }})
            </option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="service_id">Услуга *</label>
        <select id="service_id" name="service_id" required>
            {% for service in services %}
            <option value="{{ service.ID }}" {% if service.ID == schedule.ServiceID %}selected{% endif %}>
                {{ service.ServiceName }}
            </option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="employee_id">Сотрудник</label>
        <select id="employee_id" name="employee_id">
            <option value="">Не назначен</option>
            {% for emp in employees %}
            <option value="{{ emp.ID }}" {% if emp.ID == schedule.EmployeeID %}selected{% endif %}>
                {{ emp.FullName }}
            </option>
            {% endfor %}
        </select>
    </div>

    <div class="form-group">
        <label for="scheduled_date">Дата *</label>
        <input type="date" id="scheduled_date" name="scheduled_date"
               value="{{ schedule.ScheduledDate }}" required>
    </div>

    <div class="form-group">
        <label for="scheduled_time">Время</label>
        <input type="time" id="scheduled_time" name="scheduled_time"
               value="{{ schedule.ScheduledTime or '' }}">
    </div>

    <div class="form-group">
        <label for="duration">Длительность (минуты)</label>
        <input type="number" id="duration" name="duration"
               value="{{ schedule.Duration or '' }}">
    </div>

    <div class="form-group">
        <label for="cost">Стоимость (BYN)</label>
        <input type="number" step="0.01" id="cost" name="cost"
               value="{{ schedule.Cost or '' }}">
    </div>

    <div class="form-group">
        <label for="status">Статус</label>
        <select id="status" name="status">
            <option value="Запланировано" {% if schedule.Status == 'Запланировано' %}selected{% endif %}>Запланировано</option>
            <option value="В процессе" {% if schedule.Status == 'В процессе' %}selected{% endif %}>В процессе</option>
            <option value="Выполнено" {% if schedule.Status == 'Выполнено' %}selected{% endif %}>Выполнено</option>
            <option value="Отменено" {% if schedule.Status == 'Отменено' %}selected{% endif %}>Отменено</option>
        </select>
    </div>

    <div class="form-group">
        <label for="notes">Примечания</label>
        <textarea id="notes" name="notes">{{ schedule.Notes or '' }}</textarea>
    </div>

    <button type="submit" class="btn btn-primary">Сохранить</button>
    <a href="{{ url_for('schedules') }}" class="btn btn-secondary">Отмена</a>
</form>
{% endblock %}